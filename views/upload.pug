// views/index.pug
doctype html
html(lang="en")
  head
    meta(charset="UTF-8")
    meta(name="viewport" content="width=device-width, initial-scale=1.0")
    title Upload Clothes - Wardrobe Assistant
    style.
      body {
        font-family: Arial, sans-serif;
        background-color: #f4f4f4;
        margin: 0;
        padding: 20px;
        display: flex;
        justify-content: center;
      }
      .upload-container {
        background-color: #ffffff;
        padding: 2rem;
        border-radius: 8px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        width: 100%;
        max-width: 600px;
      }
      .preview-container {
        display: flex;
        gap: 10px;
        flex-wrap: wrap;
        margin-top: 10px;
      }
      .preview-container img {
        width: 100px;
        height: 100px;
        object-fit: cover;
        border-radius: 4px;
      }
      .carousel-container {
        display: flex;
        align-items: center;
        gap: 10px;
        margin: 1rem 0;
      }
      .carousel {
        display: flex;
        overflow-x: auto;
        gap: 10px;
        scroll-behavior: smooth;
      }
      .carousel img {
        width: 100px;
        height: 100px;
        object-fit: cover;
        border-radius: 4px;
      }
      button {
        background-color: #50b3a2;
        color: white;
        padding: 0.75rem;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        font-size: 1rem;
      }
      button:hover {
        background-color: #3a8f7f;
      }
      .plus-button {
        font-size: 1.5rem;
        width: 40px;
        height: 40px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 50%;
        margin-left: auto;
        background-color: #50b3a2;
      }

  body
    .upload-container
      h1 Upload Clothes to Your Wardrobe
      form(action="/upload-clothes" method="POST" enctype="multipart/form-data")
        input(type="hidden" name="userId" value=userId)

        //- Shirt Carousel
        .carousel-container
          button(type="button" onclick="scrollLeft('shirtCarousel')") ←
          .carousel#shirtCarousel
            each shirt in shirts
              img(src=shirt.base64Image alt="Shirt")
          button(type="button" onclick="scrollRight('shirtCarousel')") →
          //button.plus-button(type="button" onclick="document.getElementById('shirtInput').click()") +

        //input#shirtInput(type="file" name="shirts[]" accept="image/*" multiple hidden)
        label(for="shirts") Select Shirts:
        input#shirts(type="file" name="shirts[]" accept="image/*" multiple onchange="previewFiles(this, 'shirtPreview')")
        .preview-container#shirtPreview

        //- Pant Carousel
        .carousel-container
          button(type="button" onclick="scrollLeft('pantCarousel')") ←
          .carousel#pantCarousel
            each pant in pants
              img(src=pant.base64Image alt="Pant")
          button(type="button" onclick="scrollRight('pantCarousel')") →
          //button.plus-button(type="button" onclick="document.getElementById('pantInput').click()") +

        //input#pantInput(type="file" name="pants[]" accept="image/*" multiple hidden)
        label(for="pants") Select Pants:
        input#pants(type="file" name="pants[]" accept="image/*" multiple onchange="previewFiles(this, 'pantPreview')")
        .preview-container#pantPreview


        button(type="submit") Upload Clothes

    script.
      function scrollLeft(carouselId) {
        const carousel = document.getElementById(carouselId);
        carousel.scrollBy({ left: -100, behavior: 'smooth' });
      }

      function scrollRight(carouselId) {
        const carousel = document.getElementById(carouselId);
        carousel.scrollBy({ left: 100, behavior: 'smooth' });
      }

      function previewFiles(input, previewId) {
        const previewContainer = document.getElementById(previewId);
        previewContainer.innerHTML = ''; // Clear previous previews

        const files = input.files;

        Array.from(files).forEach(file => {
          if (!file.type.startsWith('image/')) return; // Ignore non-image files

          const img = document.createElement('img'); // Create an img element
          previewContainer.appendChild(img); // Append the img to the preview container

          const reader = new FileReader();
          reader.onload = function(e) {
            img.src = e.target.result; // Set the img src to the file data
          };
          reader.readAsDataURL(file); // Read the file as a data URL
        });
      }
